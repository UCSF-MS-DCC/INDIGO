<div class="container">
  <div class="row">
    <h2 class="text-center">Upload Sample Files</h2>
  </div>
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1">
      <hr>
    </div>
  </div>
  <div class="row">
    <h5 class="text-center">Currently only .csv and .xslx files may be uploaded</h5>
  </div>
  <br>
  <h5 class="text-center">Please be sure that data is formatted with these columns, in this order:</h5>
  <br>
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1 text-center" id="table"></div>
  </div>
  <br>
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1">
      <h5 class="text-center">Please use the following abbreviations for the Disease column: PD for Parkinson's Disease, ms for Multiple Sclerosis, mg for Myasthenia Gravis, nmo for Neuromyelitis Optica, schizophrenia, healthy control</h5>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1">
      <hr>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-5"></div>
    <div class="col-sm-2">
     <%= form_for @key, html: { multipart: true } do |f| %>
        <%= f.label :keyfile %>
        <%= f.file_field :keyfile %>
        <br>
        <%= f.submit "Save", class: "btn btn-indigo" %>
     <% end %>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-10 col-sm-offset-1">
      <hr>
    </div>
  </div>
  <div class="row">
    <ul class="col-sm-10 col-sm-offset-1"style="list-style:none;">
      <li><h4>Previous Uploads</h4></li>
      <% @keys.each do |key| %>
      <li><%= key.created_at.to_formatted_s(:long_ordinal).split(" ").reverse.drop(1).reverse.join(" ") %>: <%= key.keyfile.to_s.split('/').last %></li>
      <% end %>
    </ul>
  </div>
</div>
<script type="text/javascript">
  google.charts.load('current', {'packages': ['table']});
  google.charts.setOnLoadCallback(drawTable);

  function drawTable() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'INDIGO_ID');
    data.addColumn('string', 'Sample_source');
    data.addColumn('string', 'Disease');
    data.addColumn('string', 'Date_Sample_Received');
    data.addColumn('string', 'Ethnicity');
    data.addColumn('string', 'Age at Sample');
    data.addColumn('string', 'Gender');

    var table = new google.visualization.Table(document.getElementById('table'));

    table.draw(data, {showRowNumber: false});

  }
</script>
