<div class="container">
  <!-- nav tabs -->
  <div class="row" style="background-color:#ededed;border-top:1px solid #696969;border-bottom:1px solid #ededed;">
    <div class="col-md-12">
      <ul class="nav nav-tabs" style="margin-left:0px;">
        <li class="active"><a data-toggle="tab" href="#sample">Samples</a></li>
        <li><a data-toggle="tab" href="#hla">HLA</a></li>
        <li><a data-toggle="tab" href="#kir" disabled>KIR</a></li>
      </ul>
    </div>
  </div>
  <!-- spinner and table header/tab contents -->
  <div class="row" style="border: 1px solid #ededed; border-top:none; background-color:#fdfdfd;padding-bottom:10px;">
    <div class="col-md-12 tab-content">
      <div class="tab-pane fade in active" id="sample">
        <h3>&nbsp;&nbsp;<%= @samples.count %> Samples for <%= current_user.affiliation %></h3>
        <div id="sample_table">
          <table data-toggle="table"
            data-classes="table table-hover"
            data-page-size="30"
            data-pagination=true
            data-search=true
            data-show-columns=true
            data-show-toggle=true
            data-show-pagination-switch=true
            data-striped=true>
            <thead>
              <tr>
                <th data-sortable=true data-align='center'>INDIGO ID</th>
                <th data-sortable=true>Site Identifier</th>
                <th data-sortable=true>Sex</th>
                <th data-sortable=true>Diagnosis</th>
                <th data-sortable=true>Age of Onset</th>
                <th data-sortable=true data-visible=false>Age at Sample</th>
                <th data-sortable=true>Ethnicity</th>
                <th data-sortable=true data-visible=false>Uploaded on</th>
              </tr>
            </thead>
            <tbody>
              <% @samples.each do |sample| %>
                <tr>
                  <td><%= sample.indigo_id %></td>
                  <td><%= sample.sample_source_identifier %></td>
                  <td><%= sample.gender %></td>
                  <td><%= sample.disease %></td>
                  <td><%= sample.age_of_onset %></td>
                  <td><%= sample.age_at_sample %></td>
                  <td><%= sample.ethnicity %></td>
                  <td><%= sample.created_at.strftime('%B-%d-%Y') %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div> <!-- closes id='sample -->

      <div class="tab-pane fade hide-table" id="hla">
        <div class="row">
          <div class="col-sm-10">
            <h3>&nbsp;&nbsp;<%= @hlas.count %> HLA for <%= current_user.affiliation %></h3>
          </div>
          <div class="col-sm-2">
            <%= link_to "Download HLA Table", dataview_download_hla_data_path(format:"csv"), :class => "btn btn-indigo btn-md", :style => "margin-top:10px; color:white;" %>
          </div>
        </div>
        <div id="hla_table">
          <table data-toggle="table"
            data-classes="table table-hover"
            data-page-size="30"
            data-pagination=true
            data-search=true
            data-show-columns=true
            data-show-toggle=true
            data-show-pagination-switch=true
            data-striped=true>
            <thead>
              <th>INDIGO ID</th>
              <th>DRB1/1</th>
              <th>DRB1/2</th>
              <th>DQB1/1</th>
              <th>DQB1/2</th>
              <th>DPB1/1</th>
              <th>DPB1/2</th>
              <th>A/1</th>
              <th>A/2</th>
              <th>B/1</th>
              <th>B/2</th>
              <th>C/1</th>
              <th>C/2</th>
              <th>DPA1/1</th>
              <th>DPA1/2</th>
              <th>DQA1/1</th>
              <th>DQA1/2</th>
              <th>DRBo1</th>
              <th>DRBo2</th>
              <th>DPB1 phase ambiguities</th>
              <th data-visible=false>Uploaded on</th>
              <th data-visible=false>Manifest Version</th>
            </thead>
            <tbody>
              <% @hlas.each do |hla| %>
                <tr>
                  <td><%= hla.indigo_id %></td>
                  <td><%= hla.drb1_1 %></td>
                  <td><%= hla.drb1_2 %></td>
                  <td><%= hla.dqb1_1 %></td>
                  <td><%= hla.dqb1_2 %></td>
                  <td><%= hla.dpb1_1 %></td>
                  <td><%= hla.dpb1_2 %></td>
                  <td><%= hla.a_1 %></td>
                  <td><%= hla.a_2 %></td>
                  <td><%= hla.b_1 %></td>
                  <td><%= hla.b_2 %></td>
                  <td><%= hla.c_1 %></td>
                  <td><%= hla.c_2 %></td>
                  <td><%= hla.dpa1_1 %></td>
                  <td><%= hla.dpa1_2 %></td>
                  <td><%= hla.dqa1_1 %></td>
                  <td><%= hla.dqa1_2 %></td>
                  <td><%= hla.drbo_1 %></td>
                  <td><%= hla.drbo_2 %></td>
                  <td><%= hla.dpb1_phase_ambiguities %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div><!--  closes id="hla" -->

      <div class="tab-pane fade hide-table" id="kir">
        <div class="row">
          <div class="col-sm-10">
            <h3>&nbsp;&nbsp;<%= @kirs.count %> KIR for <%= current_user.affiliation %></h3>
          </div>
          <div class="col-sm-2">
            <%= link_to "Download KIR Table", dataview_download_kir_data_path(format:"csv"), :class => "btn btn-indigo btn-md", :style => "margin-top:10px; color:white;" %>
          </div>
        </div>
        <br>
        <div id="kir_table">
          <table data-toggle="table"
            data-classes="table table-hover"
            data-page-size="30"
            data-pagination=true
            data-search=true
            data-show-columns=true
            data-show-toggle=true
            data-show-pagination-switch=true
            data-striped=true>
            <thead>
              <th>INDIGO ID</th>
              <th>KIR2DL1</th>
              <th>KIR2DL2</th>
              <th>KIR2DL3</th>
              <th>KIR2DL4</th>
              <th>KIR2DL5A</th>
              <th>KIR2DL5B</th>
              <th>KIR2DP1</th>
              <th>KIR2DS1</th>
              <th>KIR2DS2</th>
              <th>KIR2DS3</th>
              <th>KIR2DS4</th>
              <th>KIR2DS5</th>
              <th>KIR3DL1</th>
              <th>KIR3DL2</th>
              <th>KIR3DL3</th>
              <th>KIR3DS1</th>
              <th data-visible=false>Uploaded on</th>
              <th data-visible=false>Updated on</th>
            </thead>
            <tbody>
              <% @kirs.each do |kir| %>
                <tr>
                  <td><%= kir.indigo_id %></td>
                  <td><%= kir.KIR2DL1 %></td>
                  <td><%= kir.KIR2DL2 %></td>
                  <td><%= kir.KIR2DL3 %></td>
                  <td><%= kir.KIR2DL4 %></td>
                  <td><%= kir.KIR2DL5A %></td>
                  <td><%= kir.KIR2DL5B %></td>
                  <td><%= kir.KIR2DP1 %></td>
                  <td><%= kir.KIR2DS1 %></td>
                  <td><%= kir.KIR2DS2 %></td>
                  <td><%= kir.KIR2DS3 %></td>
                  <td><%= kir.KIR2DS4 %></td>
                  <td><%= kir.KIR2DS5 %></td>
                  <td><%= kir.KIR3DL1 %></td>
                  <td><%= kir.KIR3DL2 %></td>
                  <td><%= kir.KIR3DL3 %></td>
                  <td><%= kir.KIR3DS1 %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div> <!-- closes id="kir" -->
      
    </div>
  </div>
</div>
